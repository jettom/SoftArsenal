# Random variables and distribution
In the previous module, we built a simple trading strategy base on Moving Average 10 and 50, which are "random variables" in statistics. In this module, we are going to explore basic concepts of random variables. By understanding the frequency and distribution of random variables, we extend further to the discussion of probability. In the later part of the module, we apply the probability concept in measuring the risk of investing a stock by looking at the distribution of log daily return using python. Learners are expected to have basic knowledge of probability before taking this module.

# 学習目標
Differentiate between outcome and variables by examples
Categorize discrete and continuous random variables
Explain the major reason of using "Relative Frequency" in comparing the distribution of random variables
Conclude the distribution of random variables is close to the limit as number of trial increases
Describe the probability distribution is similar to the random variable distribution of infinite trials
Summarize mean and variable are used for describing the distribution of random variables
Describe the main reason of using "Log Return" in measuing the risk of stock investment
Use the distribution of log return to estimate the probability of losing a defined % of investment
Evaluate the amount of an investment might lose at a certain probability by normal distribution quantiles
Recall the kind of distribution of stock returns suggested by Fama and French

# 2.0 Module Introduction
Welcome back to the second topic of the course. In the previous topic, we primarily introduced the use of Python to import, read, and manipulate stock data by adding new features. One of the key new features we added is a moving average. After that, we combine what we have learned and developed our first simple trading strategy. In this simple trading strategy, we buy and hold one share of stock. If the 10 day moving average, MA10, is larger than 50 day moving average, MA50, which we called long one share of stock, then we do not do anything if MA50 is less than MA10. The result looks promising. But as you can see, there are two points whereby we lose money and financial analysis, we will try our best to minimize the loss. What do we want to know is, how to compute the chance of bankruptcy if I apply this strategy? Am I lucky enough, so that we can avoid this in the next two years? The simple trading strategy is built on two variables, moving average 10 and moving average 50. In statistics, they are called random variables. This is where we need to apply some statistical knowledge by asking, what is a probability rule? Or more formally speaking, what is in distribution of these two random variables, MA10 and MA50? Identify important variables is important in helping us making better prediction and decisions, not just in financial, but in other contexts as well. For example, many social programs have a hard time making sure that right people are given enough aid. It's especially tricky where in program focus on the poorest segment of the population. The world's poorest typically cannot provide the necessary income and expense records to prove that they are qualified. In Latin America, one popular method to verify income qualification is called the Proxy Means Test or PMT. PMT identifies new variables in the model, which are family observable household attributes like the material of their walls, and the ceilings or the assets found in the home to qualify them and predict their level of need. There is also another success story in small lending industry. Many people struggle to get loans due to insufficient and non-existing credit histories. Unfortunately, this population is often taken advantage of by untrustworthy lenders. There is a company called Home Credit, who makes use of variety and alternative external variables, including telecom company bills and other transnational information to predict their clients' repayment abilities. These new variables tend to be very important in new prediction model. This example gave us enough incentives to explore some basic concepts and facts about random variables. We will explore this topic in three videos. First, we will explain, what random variable is? In the second video, we will describe the distribution of random variables, distribution helps identify extreme values of events. For example, it is used for risk management in financial context. After knowing the distribution random variables, we will apply this concept to measure the risk of investing money in Apple stock. Hopeful you will enjoy this part.


# 2.1 Outcomes and Random Variables
# Outcomes+and+Random+Variables.py
In this video, we will discuss what is a random variable, the outcome and different types of random variable. Let us start with a very simple game, we roll two dice. In this game, we will compute and record the sum of face values of two dice. Using Python, we can mimic this game. Variable die has six values, one to six, with equal chance which stands for the real die. We use the pandas method sample to mimic the game. In a programming code, two means we are rolling two dice. Then we can calculate the sum for face values of these two dice and we get eight. If we roll two dice 50 times, we can get 50 observation or realize outcomes of sum. Here, we print out first 10 observation of 50 trials. You may notice that it is possible to have same outcomes since we role dice independently in each trial. In this game, the sum, which we denote as X, is a random variable. Before we roll a die, we are not sure which outcome we can get. That is called Randomness of variable. But we know the collection of outcomes, which ranged from 2 to 12. The collection of outcomes on the left is not a random variable. Instead, they are realized or observed outcomes of values of X. Outcome is basically the results of the game. In the example above, the possible outcomes include integers from 2 to 12. So, it is called Discrete random variable. There is another type of variable, for example, daily return of a stock price. It can take any real values. Hence, it is called continuous random variable. We will discuss these two types of variables in more details in the next video.

# 2.2 Frequency and Distributions
# Frequency+and+Distribution.py
# Frequency+and+Distribution.ipynb
In this video, we will discuss frequency, relative frequency of observed outcomes, and introduce the concept of distribution. To recall, this is a dice game from the last video. Sum is a random variable, the print out is the 10 observed outcomes. Totally, we tried 50 times and get 50 realized outcomes of sum. Now, we want to calculate the frequency in this collection of outcomes. There is a very useful method of Data-Frame called value count, it will output pandas series, which has only one column if compared with dataFrame. Its index is a list of different outcomes and the value column, this is the frequency. But even can sort these series according to the index using sort index. For example, in our output, the first row says, the frequency for an outcome two is equal to one. We can plot frequency using bar chart. And frequency will change as the number of trials changes. If we want to compare the frequency of different trials, we have to convert frequency into relative frequency. Relative frequency equal to frequency divided by number of trials. With relative frequency, the shape of bar chart does not change. The scale of Y axis changes. This is a bar chart showing the frequency for the outcomes of 100 trials. As we increase the numbers of trials for example, we start with 100 trials. This is the one with the 400 trials, a 800 here, 1000 trials in this chart, 2000 trials in this chart. The bar chart goes toward a limit. The relative frequency become more and more stable as you increase the number of trials. What could be the limit if we have an infinite number of trials? Distribution of a random variable is a table consists of two sets of values. One for different values of outcome, the other list the probability for each value. Here is the distribution table. We can compute all probability for X using python here. X-distribution is a distribution table we built. From this distribution table, we do not know the shape of outcome immediately. Usually, mean and the variance are two characteristics of the distribution of random variables. Mean of a random variable is also called Expectation. The right side is a general formula for the mean and the variance of a discrete random variable. Xi here, is the only possible outcome. Pi here, is the probability for this outcome. The mean is the average of all outcomes weighted by probabilities. Similarly for variance, which describes the variation of outcome. On the left, it is a Python to compute the mean and the variance given distribution table. What is the distribution for continuous random variables? We'll compute the probability for continuous random variable. We will start with the simplest continuous random variable, which has a uniform distribution. This kind of variables takes possible values with equal chance in certain range. Here's distribution graph for uniform random variable, which takes values on zero and 100 with equal chance. The height of red line is not a probability. It will represent the value of a density function, which is applied to compute a probability for continuous random variable in this way. The area under the density curve is the probability. Hence, the whole area between zero and 100 is equal to one because this random variable can only take a value in this range. To compute the probability for X taking value between 20 and 60, it is equivalent to get area with pink color. Here's a summary. For discrete random variable, you can find probability easily by checking the table of distribution. It is more complicated in continuous case. It is the area under the probability density function, in short, PDF curve. PDF can take any shape. You should be careful to note that PDF is not probability. Now, let's come back to finance questions. Why we need a continuous random variable? Because the distribution of stock data return is continuous. We know that real distribution stock return cannot be directly observed. Not like the dice game. But do we have any good distributions that can describe the the data return reasonably good? In the next video, we will explore this problem and demonstrate how to apply normal random variable, most popular continuous random variable to approximate distribution of stock return.

# 2.3 Models of Distribution
## Models+of+Stock+Return.py
## Models+of+Stock+Return.ipynb
In this video, we will model stock return using normal random variable and demonstrate the importance of distribution in identifying financial risk. Why it is important to know the distribution or model for stock return. It is really crucial in risk management. For example, the stock price of Apple drop over 40% from August 2012 to May 2013, roughly one year. We need to compute what's the chance that the yearly return can be less than negative 40%. Is that possible, or just an extreme case like black swan. We compute log daily return for stock price of Apple. The histogram of a return is symmetric and bell shaped, which is very similar to normal distribution. Using scipy which is a scientific computation package of python, we can get density function and a cumulative distribution function. norm.pdf where a given density for each possible value of a normal random variable. In fact normal random variable can take values from positive infinity to negative infinity. In Python code here, we get the density between -4 and 4 for simplicity. Two parameters 0, 1 in norm.pdf gives the mean and the standard deviation of a normal random variable. This normal random variable is also called a standard normal random variable, and its distribution is also called z-distribution. You can change these two values in order to get a different normal variables. Because, the density functions of a normal variables are only related to their mean and their variance. We also can get a cumulative distribution function, or in short a CDF which outputs the probability for the area, and lower side of each possible value. On the left side of this slide is the graph for normal density, symmetric with a mean and symmetric center. It is also bell shaped. On the right side that is cumulative distribution function, where x takes large values. The cumulative probability will approach 1. We can model daily stock return using normal distribution. We do not know the real mean and standard deviation of this normal random variable. We have a large collection of data return from historic data. We can compute the mean and the standard deviation in this collection. They are not the same as those of normal variable, but close enough, as this shown on the right. Then, what is the chance data loss can be more than 5%? First, we will plot the normal density curve for this daily return. This pink area is the probability of losing more than 5% in one day. We can use CDF to get this probability, which is 0.5%. Hence we have 0.5% chance to have a daily loss more than 5%. Our goal is to find out how likely that the stock price of Apple were dropped over 40%, 1 year which has 220 trading days. We will use another normal distribution to model yearly return. We need to figure out the mean and the standard deviation of a yearly return. We make assumption that the daily returns are independent, which is quite wrong. But it can simplify our discussion here, to get the mean and variance of a year return. We have formulas for sum of variables. We need the independence when we compute the variance. If the data returns independent the variance of a unit return is equal to the sum of a variance of 220 daily return. Again, with no CDF we compute a probability, and it is less than 2%. That implies, there's only less than 2% chance to have yearly loss to be more than 40%. What happened to Apple in 2012 and 2013? Is not consistent with its overall performance. In many circumstances, we need to solve a different type of problem with distribution. For example, finding quantiles of a normal distribution is a common task when performing statistical test in the financial risk management. Normal distribution quantiles can obtain using norm.ppf. Ppf stands for percent point function. In finance related to the quantile there is an important risk measure value of risk or VaR. It estimates how much a set of investments might lose with a given probability. VaR is typically used by firms and the regulators in the financial industry to gauge the amount of assess needed to cover possible loss. For example, 5% of quantile of daily return is called a 95% VaR or VaR at the level of 95%. We can use a ppf to get a 5% of quantile which is negative 0.03. hence, 95% of VaR is negative 0.03, it means with the 5% chance that daily return is worse than -3%. Is it safe to use normal description to model stock return? Two famous professors in the field asset pricing, Fama and French responds in this way. Distribution of a daily and monthly stock return, are rather symmetric about their means, but the tails are fatter. Which means there are more outliers that would be expected with normal distributions. It means that, if tail returns negative, as well as positive, may occur more often than we expect. If we use normal distribution, this is debatable, at least for the returns of some assets with different time window size. To modal a fat tail, people proposed modal return using t-distributions with low degree of freedom. We will discuss and use t-distribution in the next several topics.